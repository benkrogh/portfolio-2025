---
import Layout from '@/layouts/Layout.astro';
import { BlogCard } from '@/components/blog/BlogCard';

const posts = await Astro.glob('./posts/*.md');
const formattedPosts = posts.map(post => ({
  slug: post.url?.split('/').pop()?.replace('.md', '') || '',
  title: post.frontmatter.title,
  date: post.frontmatter.date,
  color: post.frontmatter.color || '#EC6A5C'
}));
---

<Layout title="Blog | My Portfolio">
  <div class="px-4 sm:px-8">
    <div class="w-full max-w-[1500px] mx-auto my-12 sm:my-16">
      <div class="bg-[#EDE9E5] rounded-[32px] p-8 sm:p-12 w-full"> {/* Added w-full */}
        <h1 class="font-mono text-2xl sm:text-3xl leading-relaxed">
          /blog: My thoughts on<br />
          design, music, and culture
        </h1>
      </div>
      
      <div class="mt-8">
        {formattedPosts.map(post => (
          <BlogCard client:visible post={post} prefersReducedMotion={false} />
        ))}
      </div>
    </div>
  </div>
</Layout>